# Сервис для работы с банковскими счетами

Доступ к сваггеру можно получиться по следующему адресу: http://localhost:5555/swagger-ui/index.html  
Доступ к консоли бд можно получить по http://localhost:5555/h2-console, 
при запуске приложения инициализируется бд с минимальными тестовыми данными, 
исходный файл можно найти [тут](src/main/resources/db/datainit/initdata.sql)

## Описание модели данных

### Beneficiary - `сущность представляющая собой пользователя владеющего счетами`  
- id - уникальный идентификатор  
- username - пользовательское имя  

### BankAccount - `счет пользователя, у одного пользователя может быть несколько счетов`  
- id - уникальный идентификатор
- accountNumber - уникальный номер счета
- pinCode - пин-код к счету
- balance - текущий баланс счета
- beneficiary - пользователь счета

### TransactionHistory - `история транзакций конкретного счета`
- id - уникальный идентификатор
- bankAccount - счет к которому относиться транзакция
- transactionType - виды произведенной транзакции (DEPOSIT - пополнение, WITHDRAW - снятие, TRANSFER - перевод)
- price - сумма участвующая в операции
- date - дата выполнения транзакций
- transferToBankAccount - счет на который был сделан перевод, в случае если transactionType = TRANSFER


## APIs

> POST /api/bank-accounts - создание банковского счета с учетом пользовательского имени и пин-кода для нового счета, 
> генерирует псевдослучайный уникальный номер счет состоящий из 16 цифр,
> нельзя создать счет у пользователя, которого нет в бд, пин-код должен состоять из 4 цифр

> GET /api/bank-accounts/page/{pageNumber}?itemsOnPage={Integer} - получение всех пользователей с их счетами  
> pageNumber - номер страницы, использующийся для пагинации  
> itemsOnPage - количество элементов на странице, по умолчанию = 10  

> GET /api/bank-accounts/{bankAccountId}/page/{pageNumber}/history?itemsOnPage={Integer} - 
> получение всей истории транзакций конкретного счета  
> bankAccountId - id банковского счет  
> pageNumber - номер страницы, использующийся для пагинации  
> itemsOnPage - количество элементов на странице, по умолчанию = 10  

> PUT /api/bank-accounts/{bankAccountId}/deposit - пополнение счета по id, принимает пин-код и сумму, 
> пин-код не может быть пустым, должен иметь 4 цифр и должен совпадать с пин-кодом счета

> PUT /api/bank-accounts/{bankAccountId}/withdraw - снятие с счета по id счета, принимает пин-код и сумму,
> пин-код не может быть пустым, должен иметь 4 цифр и должен совпадать с пин-кодом счета

> PUT /api/bank-accounts/{bankAccountId}/transfer - перевод средств на другой счет по id счета и номера счета для перевода, 
> принимает пин-код, сумму и номер счета для перевода, пин-код не может быть пустым, должен иметь 4 цифр и должен совпадать с пин-кодом счета